"use strict";(self["webpackChunkvue2"]=self["webpackChunkvue2"]||[]).push([[22],{3500:function(t,e,a){a.r(e),a.d(e,{default:function(){return T}});var s=a(7314),i=a(3698),r=a(2938),n=a(4414),o=a(3449),l=a(4679),c=a(4162),d=a(9991),u=a(174),h=a(6930),m=a(7683),p=a(2756),f=a(4312),v=a(7150),k=a(1034),g=a(7112),b=function(){var t=this,e=t._self._c;return e(o.A,[e(p.A,[e(n.A,[e(i.A,[e(r.ri,{staticClass:"d-flex justify-space-between align-center"},[t._v(" Teachers "),e(s.A,{attrs:{color:"primary"},on:{click:function(e){return t.openDialog()}}},[e(h.A,{attrs:{left:""}},[t._v("mdi-plus")]),t._v(" Add Teacher ")],1)],1),e(l.A,{attrs:{headers:t.headers,items:t.teachers,loading:t.loading,search:t.search},scopedSlots:t._u([{key:"item.select",fn:function({item:a}){return[e("router-link",{attrs:{to:{name:"Teacher Schedule",params:{id:a._id}}}},[e(s.A,{staticClass:"white--text",attrs:{"x-small":"",color:"#2b3990"}},[t._v(" select ")])],1)]}},{key:"top",fn:function(){return[e(g.A,{staticClass:"mx-4",attrs:{label:"Search","prepend-icon":"mdi-magnify"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})]},proxy:!0},{key:"item.actions",fn:function({item:a}){return[e(h.A,{staticClass:"mr-2",attrs:{small:""},on:{click:function(e){return t.editItem(a)}}},[t._v(" mdi-pencil ")]),e(h.A,{attrs:{small:""},on:{click:function(e){return t.deleteItem(a)}}},[t._v("mdi-delete")])]}}],null,!0)})],1)],1)],1),e(d.A,{attrs:{"max-width":"500px"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[e(i.A,[e(r.ri,[e("span",{staticClass:"headline"},[t._v(t._s(t.formTitle))])]),e(r.OQ,[e(o.A,[e(u.A,{ref:"form"},[e(p.A,[e(n.A,{attrs:{cols:"12"}},[e(g.A,{attrs:{label:"First Name",rules:[t.rules.required]},model:{value:t.editedItem.firstName,callback:function(e){t.$set(t.editedItem,"firstName",e)},expression:"editedItem.firstName"}})],1),e(n.A,{attrs:{cols:"12"}},[e(g.A,{attrs:{label:"Last Name",rules:[t.rules.required]},model:{value:t.editedItem.lastName,callback:function(e){t.$set(t.editedItem,"lastName",e)},expression:"editedItem.lastName"}})],1),e(n.A,{attrs:{cols:"12"}},[e(g.A,{attrs:{label:"Middle Name"},model:{value:t.editedItem.middleName,callback:function(e){t.$set(t.editedItem,"middleName",e)},expression:"editedItem.middleName"}})],1),e(n.A,{attrs:{cols:"12"}},[e(g.A,{attrs:{label:"Suffix"},model:{value:t.editedItem.suffix,callback:function(e){t.$set(t.editedItem,"suffix",e)},expression:"editedItem.suffix"}})],1),e(n.A,{attrs:{cols:"12"}},[e(g.A,{attrs:{label:"Email",rules:[t.rules.required,t.rules.email]},model:{value:t.editedItem.email,callback:function(e){t.$set(t.editedItem,"email",e)},expression:"editedItem.email"}})],1),e(n.A,{attrs:{cols:"12"}},[e(g.A,{attrs:{label:"Phone No",rules:[t.rules.required]},model:{value:t.editedItem.phoneNo,callback:function(e){t.$set(t.editedItem,"phoneNo",e)},expression:"editedItem.phoneNo"}})],1),e(n.A,{attrs:{cols:"12"}},[e(m.A,{attrs:{"close-on-content-click":!1,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:t._u([{key:"activator",fn:function({on:a,attrs:s}){return[e(g.A,t._g(t._b({attrs:{label:"Employment Date",readonly:"",rules:[t.rules.required]},model:{value:t.editedItem.employmentDate,callback:function(e){t.$set(t.editedItem,"employmentDate",e)},expression:"editedItem.employmentDate"}},"v-text-field",s,!1),a))]}}]),model:{value:t.employmentDateMenu,callback:function(e){t.employmentDateMenu=e},expression:"employmentDateMenu"}},[e(c.A,{on:{input:function(e){t.employmentDateMenu=!1}},model:{value:t.editedItem.employmentDate,callback:function(e){t.$set(t.editedItem,"employmentDate",e)},expression:"editedItem.employmentDate"}})],1)],1),e(n.A,{attrs:{cols:"12"}},[e(f.A,{attrs:{items:t.departments,"item-text":"departmentName","item-value":"_id",label:"Select Department",required:"",multiple:""},model:{value:t.editedItem.departmentId,callback:function(e){t.$set(t.editedItem,"departmentId",e)},expression:"editedItem.departmentId"}})],1),e(n.A,{attrs:{cols:"12"}},[e(f.A,{attrs:{items:t.statusOptions,label:"Status",rules:[t.rules.required]},model:{value:t.editedItem.status,callback:function(e){t.$set(t.editedItem,"status",e)},expression:"editedItem.status"}})],1)],1)],1)],1)],1),e(r.SL,[e(k.A),e(s.A,{attrs:{color:"blue darken-1",text:""},on:{click:t.close}},[t._v("Cancel")]),e(s.A,{attrs:{color:"blue darken-1",text:""},on:{click:t.save}},[t._v("Save")])],1)],1)],1),e(v.A,{attrs:{color:t.snackbarColor,timeout:3e3},scopedSlots:t._u([{key:"action",fn:function({attrs:a}){return[e(s.A,t._b({attrs:{text:""},on:{click:function(e){t.snackbar=!1}}},"v-btn",a,!1),[t._v("Close")])]}}]),model:{value:t.snackbar,callback:function(e){t.snackbar=e},expression:"snackbar"}},[t._v(" "+t._s(t.snackbarText)+" ")])],1)},A=[],x=(a(4114),a(1250)),y=a(7114),I=a.n(y),_={data(){return{teachers:[],departments:[],loading:!0,dialog:!1,editedItem:{firstName:"",lastName:"",middleName:"",suffix:"",email:"",phoneNo:"",employmentDate:"",departmentId:"",status:""},rules:{required:t=>!!t||"Required.",email:t=>/.+@.+\..+/.test(t)||"E-mail must be valid."},statusOptions:["Active","Inactive"],snackbar:!1,snackbarText:"",snackbarColor:"success",employmentDateMenu:!1,valid:!1,search:"",headers:[{text:"Select",align:"start",sortable:!1,value:"select"},{text:"First Name",value:"firstName"},{text:"Last Name",value:"lastName"},{text:"Email",value:"email"},{text:"Phone No",value:"phoneNo"},{text:"Status",value:"status"},{text:"Actions",value:"actions",sortable:!1}]}},computed:{formTitle(){return this.editedItem._id?"Edit Teacher":"New Teacher"}},created(){this.fetchTeachers(),this.fetchDepartments()},methods:{async fetchTeachers(){this.loading=!0;try{const t=await x.A.get(`${I().url}/teacher`);this.teachers=t.data.data.items}catch(t){console.error("Error fetching teachers:",t)}finally{this.loading=!1}},async fetchDepartments(){try{const t=await x.A.get(`${I().url}/department`);t.data&&t.data.data&&Array.isArray(t.data.data.items)?this.departments=t.data.data.items:(console.error("Unexpected response structure:",t.data),this.showSnackbar("Error fetching departments: Unexpected data structure","error"))}catch(t){console.error("Error fetching departments:",t),this.showSnackbar("Error fetching departments","error")}},openDialog(){this.dialog=!0,this.resetForm()},resetForm(){this.editedItem={firstName:"",lastName:"",middleName:"",suffix:"",email:"",phoneNo:"",employmentDate:"",departmentId:"",status:""}},editItem(t){this.editedItem={...t},this.dialog=!0},async deleteItem(t){const e=confirm("Are you sure you want to delete this teacher?");if(e)try{await x.A.delete(`${I().url}/teacher/${t._id}`),this.fetchTeachers(),this.showSnackbar("Teacher deleted","success")}catch(a){console.error("Error deleting teacher:",a),this.showSnackbar("Error deleting teacher","error")}},close(){this.dialog=!1},async save(){if(this.$refs.form.validate())try{let t;if(t=this.editedItem._id?await x.A.put(`${I().url}/teacher/${this.editedItem._id}`,this.editedItem):await x.A.post(`${I().url}/teacher`,this.editedItem),t.data&&t.data.data&&t.data.data.item){if(this.editedItem._id){const e=this.teachers.findIndex((t=>t._id===this.editedItem._id));-1!==e&&this.teachers.splice(e,1,t.data.data.item)}else this.teachers.push(t.data.data.item);this.showSnackbar("Teacher saved","success")}else console.error("Unexpected response structure:",t.data),this.showSnackbar("Error saving teacher: Unexpected data structure","error")}catch(t){console.error("Error saving teacher:",t),this.showSnackbar("Error saving teacher","error")}finally{this.close()}},showSnackbar(t,e){this.snackbarText=t,this.snackbarColor="error"===e?"red":"green",this.snackbar=!0}}},w=_,N=a(1656),$=(0,N.A)(w,b,A,!1,null,"849b193c",null),T=$.exports},174:function(t,e,a){a(4114);var s=a(5803),i=a(7717),r=a(7540),n=a(4152);e.A=(0,s.A)(i.A,(0,r.G)("form")).extend({name:"v-form",provide(){return{form:this}},inheritAttrs:!1,props:{disabled:Boolean,lazyValidation:Boolean,readonly:Boolean,value:Boolean},data:()=>({inputs:[],watchers:[],errorBag:{}}),watch:{errorBag:{handler(t){const e=Object.values(t).includes(!0);this.$emit("input",!e)},deep:!0,immediate:!0}},methods:{watchInput(t){const e=t=>t.$watch("hasError",(e=>{this.$set(this.errorBag,t._uid,e)}),{immediate:!0}),a={_uid:t._uid,valid:()=>{},shouldValidate:()=>{}};return this.lazyValidation?a.shouldValidate=t.$watch("shouldValidate",(s=>{s&&(this.errorBag.hasOwnProperty(t._uid)||(a.valid=e(t)))})):a.valid=e(t),a},validate(){return 0===this.inputs.filter((t=>!t.validate(!0))).length},reset(){this.inputs.forEach((t=>t.reset())),this.resetErrorBag()},resetErrorBag(){this.lazyValidation&&setTimeout((()=>{this.errorBag={}}),0)},resetValidation(){this.inputs.forEach((t=>t.resetValidation())),this.resetErrorBag()},register(t){this.inputs.push(t),this.watchers.push(this.watchInput(t))},unregister(t){const e=this.inputs.find((e=>e._uid===t._uid));if(!e)return;const a=this.watchers.find((t=>t._uid===e._uid));a&&(a.valid(),a.shouldValidate()),this.watchers=this.watchers.filter((t=>t._uid!==e._uid)),this.inputs=this.inputs.filter((t=>t._uid!==e._uid)),this.$delete(this.errorBag,e._uid)}},render(t){return t("form",{staticClass:"v-form",attrs:{novalidate:!0,...this.attrs$},on:{submit:t=>this.$emit("submit",t)}},(0,n.$c)(this))}})},7150:function(t,e,a){a.d(e,{A:function(){return u}});var s=a(8184),i=a(8743),r=a(3381),n=a(428),o=a(6763),l=a(5803),c=a(4152),d=a(6988),u=(0,l.A)(s.A,i.A,n.A,(0,o.P)(["absolute","bottom","left","right","top"])).extend({name:"v-snackbar",props:{app:Boolean,centered:Boolean,contentClass:{type:String,default:""},multiLine:Boolean,text:Boolean,timeout:{type:[Number,String],default:5e3},transition:{type:[Boolean,String],default:"v-snack-transition",validator:t=>"string"===typeof t||!1===t},vertical:Boolean},data:()=>({activeTimeout:-1}),computed:{classes(){return{"v-snack--absolute":this.absolute,"v-snack--active":this.isActive,"v-snack--bottom":this.bottom||!this.top,"v-snack--centered":this.centered,"v-snack--has-background":this.hasBackground,"v-snack--left":this.left,"v-snack--multi-line":this.multiLine&&!this.vertical,"v-snack--right":this.right,"v-snack--text":this.text,"v-snack--top":this.top,"v-snack--vertical":this.vertical}},hasBackground(){return!this.text&&!this.outlined},isDark(){return this.hasBackground?!this.light:r.A.options.computed.isDark.call(this)},styles(){if(this.absolute||!this.app)return{};const{bar:t,bottom:e,footer:a,insetFooter:s,left:i,right:r,top:n}=this.$vuetify.application;return{paddingBottom:(0,c.Dg)(e+a+s),paddingLeft:(0,c.Dg)(i),paddingRight:(0,c.Dg)(r),paddingTop:(0,c.Dg)(t+n)}}},watch:{isActive:"setTimeout",timeout:"setTimeout"},mounted(){this.isActive&&this.setTimeout()},created(){this.$attrs.hasOwnProperty("auto-height")&&(0,d.rq)("auto-height",this),0==this.timeout&&(0,d.CI)('timeout="0"',"-1",this)},methods:{genActions(){return this.$createElement("div",{staticClass:"v-snack__action "},[(0,c.$c)(this,"action",{attrs:{class:"v-snack__btn"}})])},genContent(){return this.$createElement("div",{staticClass:"v-snack__content",class:{[this.contentClass]:!0},attrs:{role:"status","aria-live":"polite"}},[(0,c.$c)(this)])},genWrapper(){const t=this.hasBackground?this.setBackgroundColor:this.setTextColor,e=t(this.color,{staticClass:"v-snack__wrapper",class:s.A.options.computed.classes.call(this),style:s.A.options.computed.styles.call(this),directives:[{name:"show",value:this.isActive}],on:{pointerenter:()=>window.clearTimeout(this.activeTimeout),pointerleave:this.setTimeout}});return this.$createElement("div",e,[this.genContent(),this.genActions()])},genTransition(){return this.$createElement("transition",{props:{name:this.transition}},[this.genWrapper()])},setTimeout(){window.clearTimeout(this.activeTimeout);const t=Number(this.timeout);this.isActive&&![0,-1].includes(t)&&(this.activeTimeout=window.setTimeout((()=>{this.isActive=!1}),t))}},render(t){return t("div",{staticClass:"v-snack",class:this.classes,style:this.styles},[!1!==this.transition?this.genTransition():this.genWrapper()])}})}}]);
//# sourceMappingURL=22.f9012fa3.js.map